{% extends 'index.html' %}
{% load static %}

{% block content %}
<div class="container mt-5" style="margin-bottom: 100px;">
  <div class="row">
    <!-- Image Section -->
    <div class="col-md-6">
      <div class="image-section text-center">
        <img src="{{ product.image.url }}" class="img-fluid main-image mb-3" id="mainImage" alt="{{ product.name }}">
        
        <div class="thumbnails d-flex justify-content-center gap-2">
          {% if product.image %}
            <img src="{{ product.image.url }}" class="thumbnail border rounded" onclick="changeImage(this)" style="width:70px; cursor:pointer;">
          {% endif %}
          {% if product.image2 %}
            <img src="{{ product.image2.url }}" class="thumbnail border rounded" onclick="changeImage(this)" style="width:70px; cursor:pointer;">
          {% endif %}
          {% if product.image3 %}
            <img src="{{ product.image3.url }}" class="thumbnail border rounded" onclick="changeImage(this)" style="width:70px; cursor:pointer;">
          {% endif %}
          
        </div>
      </div>
    </div>

    <!-- Product Details -->
    
<div class="col-md-6">
  <h2 class="mb-2">{{ product.name }}</h2>
  <p class="text-muted mb-3">{{ product.description }}</p>

  <!-- Price Section -->  
   <br>
  <div class="price mb-3 d-flex align-items-center gap-2" style="font-size: 1.2rem;">
    {% if product.discount > 0 %}
      <span class="text-muted" style="font-size: 1.3rem;"><del>₹{{ product.price }}</del></span>
      <span class="fw-bold" style="font-size: 2rem;">₹{{ product.final_price }}</span>
      <span class="badge bg-danger" style="font-size: 1.2rem;">{{ product.discount }}% OFF</span>
    {% else %}
      <span class="fw-bold" style="font-size: 2rem;">₹{{ product.price }}</span>
      <span class="badge bg-secondary" style="font-size: 1.2rem;">No Discount</span>
    {% endif %}
  </div>

  {% if product.stock <= 0 %}
    <p class="text-danger fw-bold mb-3">Out of Stock</p>
  {% endif %}



  <!-- Buttons -->
  <div class="d-flex gap-5" style="margin-top: 100px; ">
    {% if product.stock > 0 %}
    <form method="POST" action="{% url 'user:add_to_cart' product.id %}">
      {% csrf_token %}
      <button type="submit" class="btn btn-dark px-4 py-2" style="width: 250px;">Add to Bag</button>
    </form>
  {% else %}
    <button class="btn btn-secondary px-4 py-2" style="width: 250px;" disabled>Out of Stock</button>
  {% endif %}

    <form method="POST" action="">
      {% csrf_token %}
      <button type="submit" class="btn btn-outline-danger px-4 py-2" style="width: 250px;">♡ Wishlist</button>
    </form>
  </div>
</div>

</div>
</div>

<!-- Script to change main image -->
<script>
  function changeImage(element) {
    document.getElementById("mainImage").src = element.src;
  }
</script>
{% endblock %}
